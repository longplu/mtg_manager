<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search for a card</title>
</head>
<body>
    <h1>Search for a card</h1>
    <nav>
        <a href="/">Back to Home</a>
    </nav>
    <input type="text">
    <button>Search</button><br />
    <div id="container"></div>

    <script>
        const buttonElement = document.querySelector('button');
        const inputElement = document.querySelector('input');

        buttonElement.addEventListener('click', handleClick);

        async function handleClick() {
            // const response = await fetch('/');
            // const data = await response.text();
            // console.log(data)
            
            const searchTerm = inputElement.value;
            const response = await fetch('https://api.scryfall.com/cards/search?q=' + searchTerm)
            const data =await response.json();
            console.log(data.data);
            
            const list = data.data.map(card => {
            // Object.keys(card).forEach(key => card[key] === undefined ? delete card[key] : {});
                // let url 
                // if (card.image_uris.normal != undefined) {url = card.image_uris.normal} else {url = '#'}
                return (
                    `<li>
                        ${card.name}
                        <img src="${card.image_uris ? card.image_uris.normal : 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUwAAACYCAMAAAC4aCDgAAABC1BMVEX///9EREQ/Pz80NDQxMTEtLS3Kysrf399xcXE4ODg8PDw5OTn29vaysrI+Pj6bm5vw8PBoaGjCwsJiYmJ+fn5JSUna2tqUlJRbW1t1dXUpKSnm5uZRUVG5ubkjIyOnp6fT09OKioqvnIn/+fD/7+Dt+P/c4eWioqLp6ekTExONjY3R0dGXl5fTzcbf2dPCyc+HclpAU2mbrsBwXEZncn4/XHSOemauwNG0oY1qYV2SorPn2840LyltgZSnlohhZ3E+S1TQwrNVbYFBP0eXj4ZuVTnd7ftPVVsrRV9WPDPHtKFcRSuijnnK2umaqLdZcIPCta3Izt+1tL28rq3Rw76ek5yxwMLMzcW9u8O5+Xr5AAAEfElEQVR4nO3abVfaSBgG4CfvEhIYA0ZgoEaROG1KsC+WVna7tbvr7rpiW3W3/v9fsjPhHQq4X0TPua8vZpLncMJ9ZjIzQSIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFjOCYLAnjT50Xa9XvW9xUJZF4iHu6+nyHMNw9weN3etvK7phZzRmC9s1AzjmT1/FqZVXU3Tt8YtQxuy9mbrmLpiIMxVGqY2FaavWq5p6PJPzZkpLOkIcw2W06bDVK3cvhNuF+TJ7enCvazLIsxVVGqTMBsyzEJZHe2ogc4ndY6lIcw1Bv1tHOaWHMpmmF3Ia1p+6qlZ1xHmGlw+IvWpMFW0+ezIMWfG+W5uUIgwl6voclRPwsyyrWSHXjYTjeoiOcjdso4wVyjK/rbj5cdh2sakk6p+aI1W7mpaOlIPVIS5TCj7mxWpGXyY4GT+kQ9JGaA5XByVXU2vk48wV1D9bZe8SZhq1nH3BxfVjGNG2WFgZjM7wlxhP6/623SYRyrM3cHVinpCJupIPQcMObEjzOVsNcjDe4S5VRjMSghzKU9uyXNFmgmz+KMw1Q7TUi+LEOZSVXe4ClrxzDQiIiGzNHx1BmEuo95v5EJPYoMwPW8QV2EU5nA2L+lq8S7ryJdR5wJ1BLOqak9uWJKZ7Sct65mctuU6s1AdFGTrTEasNrgq5VVhznq2u9k7f4TKBW2O3O6EagdUyq57ameZI2LWQl1xw7f++PwwTC9LLrvOh7kizHuo1syh7L2Rbpo1Gq7UsxdvajOUl7Gx56M601WFeRPDfAF3RkK1N9+WbZpeG5VGL+PCUR0vyjTzvuPgN7UVJksj4mpQmz55L9TJ+mwdlkbrTa0z5RYz+93CstSQtuaCQ5jrzYRJFXc00Rj7c4UIcz2vlneN8Tt1b8vK5vmC9WK+0Ldct4YwV3tZLBb9SdOuapa1Uw4X6hJZ+NJZOA2rYccIAAAAAPC4tGNK43ErbTQW/gO72XnQG3rKjl/R5evs6E2L6ODt3sK79MOTB7+pp+qd1n3/uvmhctr76WcZ5pVg9LHyC112D18dfip/ap3tlD9v+h6fjOPOr791L7v0+/nfsme+/2PrtHdCF6cyzJPDP+m4/1erhzDv67h/8XwS5kGXaBhm70SOb4T5vxz36U23+aF0Re++yDDV4/Nj6S31dvY/Z2H26uUvm75HAAAAAHishH/bERGlTpTGqSPCuM1t2UqEzTmPw7QTia/9ZseJuQi+fxMdljToJuYxHUUOC23x9ZwlTod837ET4rETJ7FIeXi96e+1GUkaXiVkB0kYRGfhTdS/jVp2O7qOOrYftZNG56Z5HlCQ2PZB61svvO51yZZX6Kx/Ed/E/4hzO/3XpsT+fhe0eMcPk9vbu3Z8t+mvtRmMMRGSYCHnKYt4KxUJCS9ieyISsSN46tmtZiLiNGZtWcsi1kpjERNT1UwkrWbIBHHBeERCdlkm5Ed4bNNfCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgMfgPZ5NcXqJLupgAAAAASUVORK5CYII='}" alt="${card.name}">
                        <form action="/" method="POST">
                        <input type="number" name="qty" value=1 /> 
                        <input type="text" name="name" value=${card.name} hidden/> 
                        <input type="number" name="prices_usd" value=${card.prices.usd ? card.prices.usd : 0} hidden/> 
                        <input type="text" name="img_uris_normal" value=${card.image_uris ? card.image_uris.normal : 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUwAAACYCAMAAAC4aCDgAAABC1BMVEX///9EREQ/Pz80NDQxMTEtLS3Kysrf399xcXE4ODg8PDw5OTn29vaysrI+Pj6bm5vw8PBoaGjCwsJiYmJ+fn5JSUna2tqUlJRbW1t1dXUpKSnm5uZRUVG5ubkjIyOnp6fT09OKioqvnIn/+fD/7+Dt+P/c4eWioqLp6ekTExONjY3R0dGXl5fTzcbf2dPCyc+HclpAU2mbrsBwXEZncn4/XHSOemauwNG0oY1qYV2SorPn2840LyltgZSnlohhZ3E+S1TQwrNVbYFBP0eXj4ZuVTnd7ftPVVsrRV9WPDPHtKFcRSuijnnK2umaqLdZcIPCta3Izt+1tL28rq3Rw76ek5yxwMLMzcW9u8O5+Xr5AAAEfElEQVR4nO3abVfaSBgG4CfvEhIYA0ZgoEaROG1KsC+WVna7tbvr7rpiW3W3/v9fsjPhHQq4X0TPua8vZpLncMJ9ZjIzQSIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFjOCYLAnjT50Xa9XvW9xUJZF4iHu6+nyHMNw9weN3etvK7phZzRmC9s1AzjmT1/FqZVXU3Tt8YtQxuy9mbrmLpiIMxVGqY2FaavWq5p6PJPzZkpLOkIcw2W06bDVK3cvhNuF+TJ7enCvazLIsxVVGqTMBsyzEJZHe2ogc4ndY6lIcw1Bv1tHOaWHMpmmF3Ia1p+6qlZ1xHmGlw+IvWpMFW0+ezIMWfG+W5uUIgwl6voclRPwsyyrWSHXjYTjeoiOcjdso4wVyjK/rbj5cdh2sakk6p+aI1W7mpaOlIPVIS5TCj7mxWpGXyY4GT+kQ9JGaA5XByVXU2vk48wV1D9bZe8SZhq1nH3BxfVjGNG2WFgZjM7wlxhP6/623SYRyrM3cHVinpCJupIPQcMObEjzOVsNcjDe4S5VRjMSghzKU9uyXNFmgmz+KMw1Q7TUi+LEOZSVXe4ClrxzDQiIiGzNHx1BmEuo95v5EJPYoMwPW8QV2EU5nA2L+lq8S7ryJdR5wJ1BLOqak9uWJKZ7Sct65mctuU6s1AdFGTrTEasNrgq5VVhznq2u9k7f4TKBW2O3O6EagdUyq57ameZI2LWQl1xw7f++PwwTC9LLrvOh7kizHuo1syh7L2Rbpo1Gq7UsxdvajOUl7Gx56M601WFeRPDfAF3RkK1N9+WbZpeG5VGL+PCUR0vyjTzvuPgN7UVJksj4mpQmz55L9TJ+mwdlkbrTa0z5RYz+93CstSQtuaCQ5jrzYRJFXc00Rj7c4UIcz2vlneN8Tt1b8vK5vmC9WK+0Ldct4YwV3tZLBb9SdOuapa1Uw4X6hJZ+NJZOA2rYccIAAAAAPC4tGNK43ErbTQW/gO72XnQG3rKjl/R5evs6E2L6ODt3sK79MOTB7+pp+qd1n3/uvmhctr76WcZ5pVg9LHyC112D18dfip/ap3tlD9v+h6fjOPOr791L7v0+/nfsme+/2PrtHdCF6cyzJPDP+m4/1erhzDv67h/8XwS5kGXaBhm70SOb4T5vxz36U23+aF0Re++yDDV4/Nj6S31dvY/Z2H26uUvm75HAAAAAHishH/bERGlTpTGqSPCuM1t2UqEzTmPw7QTia/9ZseJuQi+fxMdljToJuYxHUUOC23x9ZwlTod837ET4rETJ7FIeXi96e+1GUkaXiVkB0kYRGfhTdS/jVp2O7qOOrYftZNG56Z5HlCQ2PZB61svvO51yZZX6Kx/Ed/E/4hzO/3XpsT+fhe0eMcPk9vbu3Z8t+mvtRmMMRGSYCHnKYt4KxUJCS9ieyISsSN46tmtZiLiNGZtWcsi1kpjERNT1UwkrWbIBHHBeERCdlkm5Ed4bNNfCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgMfgPZ5NcXqJLupgAAAAASUVORK5CYII='} hidden/> 
                        <input type="text" name="purchase_uris_tcgplayer" value=${card.purchase_uris ? card.purchase_uris.tcgplayer : 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUwAAACYCAMAAAC4aCDgAAABC1BMVEX///9EREQ/Pz80NDQxMTEtLS3Kysrf399xcXE4ODg8PDw5OTn29vaysrI+Pj6bm5vw8PBoaGjCwsJiYmJ+fn5JSUna2tqUlJRbW1t1dXUpKSnm5uZRUVG5ubkjIyOnp6fT09OKioqvnIn/+fD/7+Dt+P/c4eWioqLp6ekTExONjY3R0dGXl5fTzcbf2dPCyc+HclpAU2mbrsBwXEZncn4/XHSOemauwNG0oY1qYV2SorPn2840LyltgZSnlohhZ3E+S1TQwrNVbYFBP0eXj4ZuVTnd7ftPVVsrRV9WPDPHtKFcRSuijnnK2umaqLdZcIPCta3Izt+1tL28rq3Rw76ek5yxwMLMzcW9u8O5+Xr5AAAEfElEQVR4nO3abVfaSBgG4CfvEhIYA0ZgoEaROG1KsC+WVna7tbvr7rpiW3W3/v9fsjPhHQq4X0TPua8vZpLncMJ9ZjIzQSIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFjOCYLAnjT50Xa9XvW9xUJZF4iHu6+nyHMNw9weN3etvK7phZzRmC9s1AzjmT1/FqZVXU3Tt8YtQxuy9mbrmLpiIMxVGqY2FaavWq5p6PJPzZkpLOkIcw2W06bDVK3cvhNuF+TJ7enCvazLIsxVVGqTMBsyzEJZHe2ogc4ndY6lIcw1Bv1tHOaWHMpmmF3Ia1p+6qlZ1xHmGlw+IvWpMFW0+ezIMWfG+W5uUIgwl6voclRPwsyyrWSHXjYTjeoiOcjdso4wVyjK/rbj5cdh2sakk6p+aI1W7mpaOlIPVIS5TCj7mxWpGXyY4GT+kQ9JGaA5XByVXU2vk48wV1D9bZe8SZhq1nH3BxfVjGNG2WFgZjM7wlxhP6/623SYRyrM3cHVinpCJupIPQcMObEjzOVsNcjDe4S5VRjMSghzKU9uyXNFmgmz+KMw1Q7TUi+LEOZSVXe4ClrxzDQiIiGzNHx1BmEuo95v5EJPYoMwPW8QV2EU5nA2L+lq8S7ryJdR5wJ1BLOqak9uWJKZ7Sct65mctuU6s1AdFGTrTEasNrgq5VVhznq2u9k7f4TKBW2O3O6EagdUyq57ameZI2LWQl1xw7f++PwwTC9LLrvOh7kizHuo1syh7L2Rbpo1Gq7UsxdvajOUl7Gx56M601WFeRPDfAF3RkK1N9+WbZpeG5VGL+PCUR0vyjTzvuPgN7UVJksj4mpQmz55L9TJ+mwdlkbrTa0z5RYz+93CstSQtuaCQ5jrzYRJFXc00Rj7c4UIcz2vlneN8Tt1b8vK5vmC9WK+0Ldct4YwV3tZLBb9SdOuapa1Uw4X6hJZ+NJZOA2rYccIAAAAAPC4tGNK43ErbTQW/gO72XnQG3rKjl/R5evs6E2L6ODt3sK79MOTB7+pp+qd1n3/uvmhctr76WcZ5pVg9LHyC112D18dfip/ap3tlD9v+h6fjOPOr791L7v0+/nfsme+/2PrtHdCF6cyzJPDP+m4/1erhzDv67h/8XwS5kGXaBhm70SOb4T5vxz36U23+aF0Re++yDDV4/Nj6S31dvY/Z2H26uUvm75HAAAAAHishH/bERGlTpTGqSPCuM1t2UqEzTmPw7QTia/9ZseJuQi+fxMdljToJuYxHUUOC23x9ZwlTod837ET4rETJ7FIeXi96e+1GUkaXiVkB0kYRGfhTdS/jVp2O7qOOrYftZNG56Z5HlCQ2PZB61svvO51yZZX6Kx/Ed/E/4hzO/3XpsT+fhe0eMcPk9vbu3Z8t+mvtRmMMRGSYCHnKYt4KxUJCS9ieyISsSN46tmtZiLiNGZtWcsi1kpjERNT1UwkrWbIBHHBeERCdlkm5Ed4bNNfCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgMfgPZ5NcXqJLupgAAAAASUVORK5CYII='} hidden/> 

                        <input type="text" name="type_line" value=${card.type_line ? card.type_line : 'no type'} hidden/> 
                        <input type="text" name="mana_cost" value=${card.mana_cost ? card.mana_cost : 'no mana cost'} hidden/>
                        <input type="text" name="oracle_text" value=${card.oracle_text ? card.oracle_text : 'no oracle text'} hidden/> 
                        <input type="number" name="cmc" value=${card.cmc ? card.cmc : 0} hidden/>  
                        <input type="text" name="list" value="Wishlist" /> 
                        <input type="submit" value="Add Cards" />
		                </form>
                    </li>`
                )
            }).join('');


            // <img src="${card.image_uris.normal}" alt="${card.name}">

            // const list = data.term.map(card => {
            //     return `<li>${card.name}</li>`
            // }).join('');

            container.innerHTML = list;
        }

    </script>

</body>
</html>